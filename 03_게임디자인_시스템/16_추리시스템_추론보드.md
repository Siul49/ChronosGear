# 추리 시스템 (Investigation System)

> 단서 수집, 증언 관리, 추론 보드 시스템 설계

---

## 왜 추리 시스템인가? (Design Rationale)

### 추리 시스템 도입 이유

| 이유 | 설명 |
|------|------|
| **스토리 적합성** | 게임 스토리가 **미스터리/추리물** → 플레이어도 직접 추리해야 몰입 |
| **시간 능력 연계** | 과거/미래 이동으로 **시간대별 정보 비교** = 독특한 추리 경험 |
| **능동적 플레이** | 컷씬에서 "범인 공개"보다 **플레이어가 직접 발견**하면 성취감 극대화 |
| **리플레이 가치** | 단서 조합 순서에 따라 다른 해석 가능 |

### 추리 보드 선택 이유

| 요소 | 왜 이것인가? |
|------|-------------|
| **시각적 연결** | 단서들의 관계를 **한눈에** 파악 가능 |
| **플레이어 참여** | 직접 연결선을 그려야 함 = 수동적 시청이 아닌 능동적 참여 |
| **진행 확인** | "내가 뭘 알고 있는지" 언제든 확인 가능 |

### 증언 모순 시스템 선택 이유

| 요소 | 효과 |
|------|------|
| **NPC 불신** | 캐릭터를 "믿을 수 없다"는 긴장감 유지 |
| **시간 활용** | 과거 이동으로 **증언 검증** → 시간 능력의 가치 강화 |
| **반전 복선** | 모라의 초기 높은 신뢰도 → 후반 모순 발견 = 강렬한 반전 |

> [!IMPORTANT]
> **핵심 원칙**: 추리는 **게임플레이**여야 함.
> 컷씬에서 알려주지 않고, 플레이어가 **직접 연결하고 발견**해야 진정한 추리 게임.

---

## 1. 추리 시스템 개요

### 핵심 컨셉
```
"플레이어가 직접 진실을 발견하게 만든다"
```

| 원칙 | 설명 |
|------|------|
| **능동적 탐색** | 단서는 주어지지 않고 찾아야 함 |
| **모순 발견** | 정보들 사이의 불일치 파악 |
| **시간 활용** | 과거/현재 비교로 진실 도출 |
| **논리적 연결** | 단서 조합으로 새 정보 해금 |

---

## 2. 단서 수집 시스템

### 2.1 단서 유형

| 유형 | 심볼 | 설명 | 예시 |
|------|------|------|------|
| **물증** | 📦 | 물리적 증거 | 총알, 메모, 사진 |
| **증언** | 💬 | NPC 진술 | "그날 밤 총소리를 들었다" |
| **기록** | 📜 | 문서/일지 | 할아버지 일기, 연구 노트 |
| **환경** | 👁️ | 현장 관찰 | 벽의 총알 자국, 발자국 |
| **시간 단서** | ⏰ | 시간 이동으로만 발견 | 과거의 대화, 미래의 결과 |

### 2.2 단서 상호작용

```
[조사 가능 오브젝트]
         │
    E / A 버튼
         │
         ▼
┌─────────────────────────┐
│     [조사 UI]           │
│                         │
│  🔍 자세히 보기         │
│  📋 추리 보드에 추가    │
│  ❌ 닫기                │
└─────────────────────────┘
```

### 2.3 단서 데이터 구조

```
ClueData {
    id: "CLUE_001"
    type: "EVIDENCE"  // EVIDENCE, TESTIMONY, RECORD, ENVIRONMENT, TIME
    name: "총알 껍데기"
    description: "9mm 권총 탄피. 최근에 발사된 것으로 보인다."
    location: "치안국 지하"
    chapter: 1
    connections: ["CLUE_003", "CLUE_007"]  // 연결 가능한 단서
    contradiction: "CLUE_012"  // 모순되는 단서
    unlocks: "DEDUCTION_003"  // 해금되는 추론
}
```

---

## 3. 증언 시스템

### 3.1 NPC 증언 수집

```
[NPC 대화]
    │
    ├── 일반 대화 (스토리/세계관)
    │
    └── 💬 증언 (자동 기록)
              │
         ┌────┴────┐
         │         │
      [신뢰성]  [모순 가능성]
```

### 3.2 증언 신뢰도

| 신뢰도 | 표시 | 의미 |
|--------|------|------|
| ★★★ | 🟢 | 확인된 사실 |
| ★★☆ | 🟡 | 부분적 신뢰 |
| ★☆☆ | 🟠 | 의심스러움 |
| ☆☆☆ | 🔴 | 모순 발견 |

### 3.3 증언 모순 시스템

```
[증언 A: 레이]                  [증언 B: 목격자]
"그날 밤 나는                   "치안국에서 형사가
 학교에 있었다"                  나가는 걸 봤다"
        │                              │
        └──────────┬───────────────────┘
                   │
              [모순 감지]
                   │
                   ▼
         ┌─────────────────┐
         │   ⚠️ 모순 발생   │
         │                 │
         │  레이의 증언과   │
         │  목격자 증언이   │
         │  맞지 않습니다   │
         │                 │
         │ [추리 보드 확인] │
         └─────────────────┘
```

---

## 4. 추리 보드 (Investigation Board)

### 4.1 UI 레이아웃

```
┌──────────────────────────────────────────────────────────────┐
│                      📋 추리 보드                             │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────┐         ?         ┌────────┐                    │
│  │ 단서 1 │═══════════════════│ 단서 2 │                    │
│  │ 총소리 │                   │레이 권총│                    │
│  └────────┘                   └────────┘                    │
│       │                            │                         │
│       │ 연결                       │                         │
│       ▼                            ▼                         │
│  ┌────────┐                   ┌────────┐                    │
│  │ 증언 A │ ═══ 모순 ═══════ │ 증언 B │                    │
│  │"밤에"  │                   │"낮에"  │                    │
│  └────────┘                   └────────┘                    │
│                                                              │
│  ───────────────────────────────────────────────            │
│  💡 추론: 시간이 조작되었다                                  │
│  ───────────────────────────────────────────────            │
├──────────────────────────────────────────────────────────────┤
│  [단서 목록]  [연결하기]  [추론 도출]  [닫기]                │
└──────────────────────────────────────────────────────────────┘
```

### 4.2 연결 시스템

#### 연결 가능 조건
| 조건 | 결과 |
|------|------|
| 관련 단서 2개 | 연결선 표시 |
| 모순 단서 2개 | ⚠️ 모순 표시 |
| 정답 조합 | 💡 추론 해금 |
| 오답 조합 | "관련성을 찾을 수 없다" |

#### 연결 인터페이스
```
1. 단서 A 선택
2. "연결하기" 버튼
3. 단서 B 선택
4. 시스템 판정
   ├── 성공 → 연결선 + 추론 힌트
   └── 실패 → 메시지 표시
```

### 4.3 추론 도출

```
[필요 단서]                      [추론 결과]
                                
📦 총알 껍데기    ═══════╗
💬 "총소리 들음"  ═══════╬═══▶ 💡 "총이 발사되었다"
👁️ 벽의 자국     ═══════╝
                                
💬 레이: "학교에" ═══════╗
💬 목격: "나가는" ═══════╬═══▶ 💡 "레이가 거짓말했다"
⏰ 과거의 레이    ═══════╝
```

---

## 5. 시간 여행 추리

### 5.1 과거/미래 비교

| 시간대 | 발견 가능 정보 |
|--------|---------------|
| **과거** | 사건 전 상황, 증거 원본, 동기 |
| **현재** | 결과, 변화, 현재 상태 |
| **미래** | 장기적 결과, 진실의 귀결 |

### 5.2 시간 단서 활용 예시

```
[현재] 레이: "난 권총을 산 적 없어"
         │
    [시간 이동]
         │
         ▼
[과거] 어린 레이가 장난감 총을 가지고 놈
         │
    ⏰ 시간 단서 획득
         │
         ▼
[추리] 레이는 어릴 때부터 총에 관심 있었음
       → 증언의 신뢰도 하락
```

### 5.3 시간 모순

```
[과거] "화재로 시계 가게가 전소됨"
         │
    그런데...
         │
[현재] 시계 가게 건물이 멀쩡히 존재
         │
         ▼
💡 추론: 누군가 시간을 되돌렸다
```

---

## 6. 챕터별 추리 흐름

### 6.1 프롤로그

| 수집 | 해금 추론 |
|------|-----------|
| 할아버지 메모 | "다락방은 특별하다" |
| 회중시계 | "시간을 조작할 수 있다" |
| 기어 | "기어가 시간 열쇠다" |

### 6.2 1장: 총소리의 출처

| 핵심 질문 | 필요 단서 | 해금 추론 |
|-----------|-----------|-----------|
| 누가 쐈는가? | 총알, 증언 3개 | 용의자 특정 |
| 왜 쐈는가? | 과거 관계, 동기 | 동기 파악 |
| 어디서 쐈는가? | 현장 증거 | 장소 특정 |

#### 수집해야 할 단서

| ID | 단서 | 위치 | 유형 |
|----|------|------|------|
| C101 | 9mm 탄피 | 치안국 지하 | 물증 |
| C102 | 레이의 권총 | 레이 사무실 | 물증 |
| C103 | "총소리 들음" | 목격자 NPC | 증언 |
| C104 | "그날 밤 외출" | 레이 | 증언 |
| C105 | 벽의 총알 자국 | 시계 가게 | 환경 |
| C106 | 과거의 레이 | 시간 이동 | 시간 |

#### 추론 트리

```
[1단계]
C101 + C105 → "총이 발사됨" (확정)

[2단계]
C103 + C104 → "레이 증언 모순" (의심)

[3단계]
C102 + C106 → "레이가 범인?" (가설)

[진실 해금 조건]
C106의 진실: 레이는 범인이 아님
→ 진짜 범인 힌트 획득
```

### 6.3 2장: 과거 개입의 증거

| 핵심 질문 | 필요 단서 | 해금 추론 |
|-----------|-----------|-----------|
| 누가 과거를 바꿨나? | 크론의 기억, 변화 기록 | 크론의 개입 |
| 무엇이 바뀌었나? | 친구들의 변화 기록 | 나비효과 |
| 왜 바꿨나? | 어린 크론의 선택 | 동기 |

### 6.4 3장: 진짜 범인의 정체

| 핵심 질문 | 필요 단서 | 해금 추론 |
|-----------|-----------|-----------|
| 할아버지는 왜 죽었나? | 시간 파편, 목격 증언 | 사고/타살 |
| 모라는 무엇을 알고 있나? | 모라의 모순 | 숨겨진 목적 |
| 시간은 왜 조작되었나? | 대시계 기록 | 진짜 원인 |

### 6.5 4장: 최종 추리

| 질문 | 해답 |
|------|------|
| 할아버지의 죽음 | 미래의 크론 자신 |
| 모라의 목적 | 시간 정지로 세계 보호 |
| 진짜 해결책 | 올바른 선택 |

---

## 7. UI/UX 상세

### 7.1 단서 획득 연출

```
         ★
        /|\
    💡 단서 발견! 💡
    
    📦 "9mm 탄피"
    
    치안국 지하에서 발견했다.
    누군가 총을 쐈다는 증거다.
    
    [추리 보드에 추가됨]
```

### 7.2 모순 발견 연출

```
    ⚡ 모순 감지! ⚡
    
    💬 레이: "학교에 있었다"
        VS
    💬 목격자: "치안국에서 봤다"
    
    어느 쪽이 진실일까?
    
    [추리 보드 업데이트]
```

### 7.3 추론 해금 연출

```
    🎯 추론 도출!
    
    수집한 단서들을 종합하면...
    
    💡 "레이는 그날 밤 거짓말을 했다"
    
    하지만 왜?
    더 많은 단서가 필요하다.
    
    [새로운 탐색 영역 해금]
```

---

## 8. 시스템 데이터

### 8.1 단서 총 개수

| 챕터 | 물증 | 증언 | 기록 | 환경 | 시간 | 합계 |
|------|------|------|------|------|------|------|
| 프롤로그 | 3 | 1 | 2 | 2 | 0 | 8 |
| 1장 | 5 | 8 | 3 | 4 | 2 | 22 |
| 2장 | 4 | 10 | 5 | 3 | 5 | 27 |
| 3장 | 6 | 8 | 4 | 5 | 4 | 27 |
| 4장 | 3 | 5 | 2 | 3 | 3 | 16 |
| **총합** | **21** | **32** | **16** | **17** | **14** | **100** |

### 8.2 추론 총 개수

| 챕터 | 필수 추론 | 선택 추론 | 히든 추론 |
|------|-----------|-----------|-----------|
| 프롤로그 | 2 | 1 | 0 |
| 1장 | 5 | 3 | 1 |
| 2장 | 6 | 4 | 2 |
| 3장 | 5 | 3 | 2 |
| 4장 | 4 | 2 | 1 |
| **총합** | **22** | **13** | **6** |
